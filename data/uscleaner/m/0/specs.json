{
    "iomap":
    {
        "automatons":
        {
            "0":
            {
                "name": "em4",
                "ip": "10.0.0.2",
                "protocol": "modbus",
                "port": 502
            }
        },
        "gates": {
            "emergency": {
                "type": "bit",
                "bus": "in",
                "address": 1016,
                "automaton": 0,
                "default": 0
            },
            "cover_closed": {
                "type": "bit",
                "bus": "in",
                "address": 1017,
                "automaton": 0,
                "default": 0
            },
            "temperature": {
                "type": "word",
                "bus": "in",
                "gateType": "temperature",
                "address": 26,
                "automaton": 0,
                "default": 26
            },
            "motor-speed": {
                "type": "word",
                "address": 1,
                "bus": "out",
                "default": 0,
                "automaton": 0,
                "safeConditions": [
                    {
                        "gate": "cover_closed",
                        "expectedValue": 1
                    }
                ]
            },
            "motor-direction": {
                "type": "bit",
                "bus": "out",
                "address": 1000,
                "automaton": 0,
                "default": 0
            },
            "usPower": {
                "type": "bit",
                "bus": "out",
                "address": 1003,
                "automaton": 0,
                "default": 0
            },
            "temperature-heaters": {
                "type": "bit",
                "bus": "out",
                "address": 1001,
                "automaton": 0,
                "default": 0
            },
            "temperature-ventilation": {
                "type": "bit",
                "bus": "out",
                "address": 1004,
                "automaton": 0,
                "default": 0
            },
            "pump": {
                "type": "bit",
                "bus": "out",
                "address": 1002,
                "automaton": 0,
                "default": 1
            }
        }
    },
    "slots": [
        {
            "name": "bac",
            "type": "media",
            "isProductable": false,
            "sensors": [
                {
                    "io": "temperature",
                    "type": "temperature"
                }
            ]
        }
    ],
    "maintenance": [
        {
            "name": "filter",
            "durationType": "time",
            "durationLimit": 15,

            "procedure": {
                "desc": "remplacement du filtre",
                "steps": [
                    {
                        "name": "Ouverture de la porte de maintenance",
                        "images": [
                            "assets/maintenances/uscleanerm0/filter/1.jpg"
                        ]
                    },
                    {
                        "name": "Fermeture des vannes reliées a la pompe",
                        "images": [
                            "assets/maintenances/uscleanerm0/filter/2.jpg",
                            "assets/maintenances/uscleanerm0/filter/3.jpg"
                        ]
                    },
                    {
                        "name": "Dévissage du couvercle de la pompe",
                        "images": [
                            "assets/maintenances/uscleanerm0/filter/4.jpg"
                        ]
                    },
                    {
                        "name": "Retirer le filtre de la pompe",
                        "images": [
                            "assets/maintenances/uscleanerm0/filter/5.jpg",
                            "assets/maintenances/uscleanerm0/filter/6.jpg"
                        ]
                    },
                    {
                        "name": "Remplacement du filtre de la pompe",
                        "images": [
                            "assets/maintenances/uscleanerm0/filter/7.jpg",
                            "assets/maintenances/uscleanerm0/filter/8.jpg"
                        ]
                    },
                    {
                        "name": "Re-ouverture des vannes",
                        "images": [
                            "assets/maintenances/uscleanerm0/filter/9.jpg"
                        ]
                    },
                    {
                        "name": "Fermeture de la pompe",
                        "images": [
                            "assets/maintenances/uscleanerm0/filter/5.jpg",
                            "assets/maintenances/uscleanerm0/filter/4.jpg"
                        ]
                    },
                    {
                        "name": "Fermeture de la porte",
                        "images": [
                            "assets/maintenances/uscleanerm0/filter/1.jpg"
                        ]
                    }
                ]
            }
        }
    ],
    "passives": {
        "temperature": {
            "sleep": 2000,
            "sensor": "temperature",
            "actuatorUp": "temperature.heaters",
            "actuatorDown": "temperature.ventilation",
            "defaultObjective": 25
        }
    },
    "profile": {
        "__desc": "USCleaner M 1 Profile descriptor",
        "type": "cleaning",
        "version": 0,
        "fieldGroups": [
            {
                "name": "principal",
                "fields": [
                    {
                        "name": "duration",
                        "unity": "m-s",
                        "type": "int",
                        "value": 300
                    },
                    {
                        "name": "usEnabled",
                        "type": "boolean",
                        "value": false
                    }
                ]
            },
            {
                "name": "heatingManagement",
                "fields": [
                    {
                        "name": "enabled",
                        "type": "boolean",
                        "value": true
                    },
                    {
                        "name": "targetTemperature",
                        "type": "int",
                        "unity": "c",
                        "value": 30
                    }
                ]
            },
            {
                "name": "coolingManagement",
                "fields": [
                    {
                        "name": "enabled",
                        "type": "boolean",
                        "value": false
                    },
                    {
                        "name": "ventilationEnabled",
                        "type": "boolean",
                        "value": false
                    }
                ]
            },
            {
                "name": "motor",
                "fields": [
                    {
                        "name": "motorSpeed",
                        "type": "float",
                        "value": 100,
                        "floatMin": 0,
                        "floatMax": 100,
                        "floatStep": 5
                    }
                ]
            }
        ]
    }    
}