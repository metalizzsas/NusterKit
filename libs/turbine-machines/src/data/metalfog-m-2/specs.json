{
   "$schema": "../../../node_modules/@metalizzsas/nuster-typings/build/schemas/schema-specs.json",

   "nuster": {
      "connectPopup": {
         "title": "toasts.nozzle-cleaning.title",
         "message": "toasts.nozzle-cleaning.message",
         "level": "info",
         "callToActions": [
            {
               "name": "toasts.nozzle-cleaning.actions.main",
               "APIEndpoint": {
                  "url": "/api/v1/cycle/nozzle-cleaning",
                  "method": "post"
               },
               "UIEndpoint": "/"
            }
         ]
      }
   },

   "iohandlers": [
      {
         "type": "wago",
         "ip": "192.168.1.10"
      },
      {
         "type": "ex260sx",
         "size": 32,
         "ip": "192.168.1.3"
      }
   ],
   "iogates": [
      {
         "name": "emergency-stop",
         "type": "default",
         "bus": "in",
         "controllerId": 0,
         "address": 0,
         "default": 0,
         "size": "bit"
      },
      {
         "name": "air-sensor",
         "type": "default",
         "bus": "in",
         "controllerId": 0,
         "address": 1,
         "default": 0,
         "size": "bit"
      },
      {
         "name": "cover-closed",
         "type": "default",
         "bus": "in",
         "controllerId": 0,
         "address": 2,
         "default": 0,
         "size": "bit"
      },
      {
         "name": "levels#edi-max-n",
         "type": "default",
         "bus": "in",
         "controllerId": 0,
         "address": 3,
         "default": 0,
         "size": "bit"
      },
      {
         "name": "levels#act-max-n",
         "type": "default",
         "bus": "in",
         "controllerId": 0,
         "address": 4,
         "default": 0,
         "size": "bit"
      },
      {
         "name": "levels#eff-max-n",
         "type": "default",
         "bus": "in",
         "controllerId": 0,
         "address": 5,
         "default": 0,
         "size": "bit"
      },
      {
         "name": "eff-container-sensor",
         "type": "default",
         "bus": "in",
         "controllerId": 0,
         "address": 6,
         "default": 0,
         "size": "bit"
      },
      {
         "name": "levels#edi-min-n",
         "type": "default",
         "bus": "in",
         "controllerId": 0,
         "address": 7,
         "default": 0,
         "size": "bit"
      },
      {
         "name": "levels#act-min-n",
         "type": "default",
         "bus": "in",
         "controllerId": 0,
         "address": 8,
         "default": 0,
         "size": "bit"
      },
      {
         "name": "levels#ox-min-n",
         "type": "default",
         "bus": "in",
         "controllerId": 0,
         "address": 9,
         "default": 0,
         "size": "bit"
      },
      {
         "name": "levels#rd-min-n",
         "type": "default",
         "bus": "in",
         "controllerId": 0,
         "address": 10,
         "default": 0,
         "size": "bit"
      },
      {
         "name": "motor#speed",
         "type": "mapped",
         "bus": "out",
         "controllerId": 0,
         "address": 0,
         "default": 0,
         "size": "word",

         "unity": "RPM",

         "mapInMin": 0,
         "mapInMax": 32767,
         "mapOutMin": 0,
         "mapOutMax": 100
      },
      {
         "name": "regulators#rd-pressure",
         "type": "mapped",
         "bus": "out",
         "controllerId": 0,
         "address": 1,
         "default": 0,
         "size": "word",

         "unity": "bar",

         "mapInMin": 0,
         "mapInMax": 3277,
         "mapOutMin": 0.05,
         "mapOutMax": 0.5
      },
      {
         "name": "regulators#ox-pressure",
         "type": "mapped",
         "bus": "out",
         "controllerId": 0,
         "address": 2,
         "default": 0,
         "size": "word",

         "unity": "bar",

         "mapInMin": 0,
         "mapInMax": 3277,
         "mapOutMin": 0.05,
         "mapOutMax": 0.5
      },
      {
         "name": "motor#direction",
         "type": "default",
         "bus": "out",
         "controllerId": 0,
         "address": 0,
         "default": 0,
         "size": "bit"
      },
      {
         "name": "ventilation",
         "type": "default",
         "bus": "out",
         "controllerId": 0,
         "address": 1,
         "default": 0,
         "size": "bit"
      },
      {
         "name": "air-heater",
         "type": "default",
         "bus": "out",
         "controllerId": 0,
         "address": 2,
         "default": 0,
         "size": "bit"
      },
      {
         "name": "regulators#power",
         "type": "default",
         "bus": "out",
         "controllerId": 0,
         "address": 3,
         "default": 0,
         "size": "bit"
      },
      {
         "name": "hybrid#act-res",
         "type": "default",
         "bus": "out",
         "controllerId": 1,
         "address": 31,
         "default": 0,
         "size": "bit"
      },
      {
         "name": "hybrid#edi-res",
         "type": "default",
         "bus": "out",
         "controllerId": 1,
         "address": 30,
         "default": 0,
         "size": "bit"
      },
      {
         "name": "met#ox-res",
         "type": "default",
         "bus": "out",
         "controllerId": 1,
         "address": 29,
         "default": 0,
         "size": "bit"
      },
      {
         "name": "met#rd-res",
         "type": "default",
         "bus": "out",
         "controllerId": 1,
         "address": 28,
         "default": 0,
         "size": "bit"
      },
      {
         "name": "hybrid#plv",
         "type": "default",
         "bus": "out",
         "controllerId": 1,
         "address": 27,
         "default": 0,
         "size": "bit"
      },
      {
         "name": "met#plv-high",
         "type": "default",
         "bus": "out",
         "controllerId": 1,
         "address": 26,
         "default": 0,
         "size": "bit"
      },
      {
         "name": "met#plv-mid",
         "type": "default",
         "bus": "out",
         "controllerId": 1,
         "address": 25,
         "default": 0,
         "size": "bit"
      },
      {
         "name": "met#plv-low",
         "type": "default",
         "bus": "out",
         "controllerId": 1,
         "address": 24,
         "default": 0,
         "size": "bit"
      },
      {
         "name": "hybrid#act-lq",
         "type": "default",
         "bus": "out",
         "controllerId": 1,
         "address": 23,
         "default": 0,
         "size": "bit"
      },
      {
         "name": "hybrid#edi-lq",
         "type": "default",
         "bus": "out",
         "controllerId": 1,
         "address": 22,
         "default": 0,
         "size": "bit"
      },
      {
         "name": "hybrid#lq-fill-act",
         "type": "default",
         "bus": "out",
         "controllerId": 1,
         "address": 21,
         "default": 0,
         "size": "bit"
      },
      {
         "name": "met#met-lq-high",
         "type": "default",
         "bus": "out",
         "controllerId": 1,
         "address": 20,
         "default": 0,
         "size": "bit"
      },
      {
         "name": "met#met-lq-mid",
         "type": "default",
         "bus": "out",
         "controllerId": 1,
         "address": 19,
         "default": 0,
         "size": "bit"
      },
      {
         "name": "met#met-lq-low",
         "type": "default",
         "bus": "out",
         "controllerId": 1,
         "address": 18,
         "default": 0,
         "size": "bit"
      },
      {
         "name": "hybrid#air-cleaning",
         "type": "default",
         "bus": "out",
         "controllerId": 1,
         "address": 17,
         "default": 0,
         "size": "bit"
      },
      {
         "name": "met#air-cleaning",
         "type": "default",
         "bus": "out",
         "controllerId": 1,
         "address": 16,
         "default": 0,
         "size": "bit"
      }
   ],
   "containers": [
      {
         "name": "ox",
         "type": "psp",
         "supportedProductSeries": ["usl_ox"],
         "sensors": [
            {
               "io": "levels#ox-min-n",
               "logic": "level-min"
            }
         ],
         "callToAction": [
            {
               "name": "unload",
               "APIEndpoint": {
                  "url": "/api/v1/cycle/container-emptying",
                  "method": "post",
                  "body": {
                     "skeleton": "container-emptying",
                     "name": "container-emptying-ox",
                     "isPremade": true,
                     "values": [
                        {
                           "name": "emptying#ox",
                           "type": "bool",
                           "value": 1
                        },
                        {
                           "name": "emptying#rd",
                           "type": "bool",
                           "value": 0
                        },
                        {
                           "name": "emptying#act",
                           "type": "bool",
                           "value": 0
                        },
                        {
                           "name": "emptying#edi",
                           "type": "bool",
                           "value": 0
                        }
                     ]
                  }
               },
               "UIEndpoint": "/"
            }
         ]
      },
      {
         "name": "rd",
         "type": "psp",
         "supportedProductSeries": ["usl_rd"],
         "sensors": [
            {
               "io": "levels#rd-min-n",
               "logic": "level-min"
            }
         ],
         "callToAction": [
            {
               "name": "unload",
               "APIEndpoint": {
                  "url": "/api/v1/cycle/container-emptying",
                  "method": "post",
                  "body": {
                     "skeleton": "container-emptying",
                     "name": "container-emptying-rd",
                     "isPremade": true,
                     "values": [
                        {
                           "name": "emptying#ox",
                           "type": "bool",
                           "value": 0
                        },
                        {
                           "name": "emptying#rd",
                           "type": "bool",
                           "value": 1
                        },
                        {
                           "name": "emptying#act",
                           "type": "bool",
                           "value": 0
                        },
                        {
                           "name": "emptying#edi",
                           "type": "bool",
                           "value": 0
                        }
                     ]
                  }
               },
               "UIEndpoint": "/"
            }
         ]
      },
      {
         "name": "act",
         "type": "psp",
         "supportedProductSeries": ["usl_act"],
         "sensors": [
            {
               "io": "levels#act-min-n",
               "logic": "level-min"
            },
            {
               "io": "levels#act-max-n",
               "logic": "level-max"
            }
         ],
         "callToAction": [
            {
               "name": "load_alt",
               "APIEndpoint": {
                  "url": "/api/v1/cycle/act-fill",
                  "method": "post"
               },
               "UIEndpoint": "/"
            },
            {
               "name": "unload",
               "APIEndpoint": {
                  "url": "/api/v1/cycle/container-emptying",
                  "method": "post",
                  "body": {
                     "skeleton": "container-emptying",
                     "isPremade": true,
                     "name": "container-emptying-act",
                     "values": [
                        {
                           "name": "emptying#ox",
                           "type": "bool",
                           "value": 0
                        },
                        {
                           "name": "emptying#rd",
                           "type": "bool",
                           "value": 0
                        },
                        {
                           "name": "emptying#act",
                           "type": "bool",
                           "value": 1
                        },
                        {
                           "name": "emptying#edi",
                           "type": "bool",
                           "value": 0
                        }
                     ]
                  }
               },
               "UIEndpoint": "/"
            }
         ]
      },
      {
         "name": "edi",
         "type": "psp",
         "sensors": [
            {
               "io": "levels#edi-min-n",
               "logic": "level-min"
            },
            {
               "io": "levels#edi-max-n",
               "logic": "level-max"
            }
         ],
         "callToAction": [
            {
               "name": "unload_alt",
               "APIEndpoint": {
                  "url": "/api/v1/cycle/container-emptying",
                  "method": "post",
                  "body": {
                     "skeleton": "container-emptying",
                     "name": "container-emptying-edi",
                     "isPremade": true,
                     "values": [
                        {
                           "name": "emptying#ox",
                           "type": "bool",
                           "value": 0
                        },
                        {
                           "name": "emptying#rd",
                           "type": "bool",
                           "value": 0
                        },
                        {
                           "name": "emptying#act",
                           "type": "bool",
                           "value": 0
                        },
                        {
                           "name": "emptying#edi",
                           "type": "bool",
                           "value": 1
                        }
                     ]
                  }
               },
               "UIEndpoint": "/"
            }
         ]
      },
      {
         "name": "eff",
         "type": "cnt",
         "sensors": [
            {
               "io": "levels#eff-max-n",
               "logic": "level-limit-max"
            },
            {
               "io": "eff-container-sensor",
               "logic": "presence"
            }
         ]
      }
   ],
   "profileSkeletons": [
      {
         "name": "default",
         "fields": [
            {
               "name": "met-nozzles#met-high",
               "type": "bool",
               "value": 1
            },
            {
               "name": "met-nozzles#met-medium",
               "type": "bool",
               "value": 1
            },
            {
               "name": "met-nozzles#met-low",
               "type": "bool",
               "value": 1
            },
            {
               "name": "activation#enabled",
               "type": "bool",
               "value": 1
            },
            {
               "name": "activation#timeOn",
               "type": "time",
               "units": [
                  "seconds",
                  "milliseconds"
               ],
               "value": 2
            },
            {
               "name": "activation#timeOff",
               "type": "time",
               "units": [
                  "seconds",
                  "milliseconds"
               ],
               "value": 10
            },
            {
               "name": "activation#count",
               "type": "int",
               "value": 5
            },
            {
               "name": "wash1#enabled",
               "type": "bool",
               "value": 1
            },
            {
               "name": "wash1#duration",
               "type": "time",
               "units": [
                  "minutes",
                  "seconds"
               ],
               "value": 15
            },
            {
               "name": "metalization#enabled",
               "type": "bool",
               "value": 1
            },
            {
               "name": "metalization#timeOn",
               "type": "time",
               "units": [
                  "seconds",
                  "milliseconds"
               ],
               "value": 2
            },
            {
               "name": "metalization#timeOff",
               "type": "time",
               "units": [
                  "seconds",
                  "milliseconds"
               ],
               "value": 10
            },
            {
               "name": "metalization#count",
               "type": "int",
               "value": 5
            },
            {
               "name": "metalization-wash#enabled",
               "type": "bool",
               "value": 0
            },
            {
               "name": "metalization-wash#duration",
               "type": "time",
               "units": ["seconds"],
               "value": 5
            },
            {
               "name": "wash2#enabled",
               "type": "bool",
               "value": 1
            },
            {
               "name": "wash2#duration",
               "type": "time",
               "units": [
                  "minutes",
                  "seconds"
               ],
               "value": 45
            },
            {
               "name": "drying#enabled",
               "type": "bool",
               "value": 1
            },
            {
               "name": "drying#duration",
               "type": "time",
               "units": [
                  "minutes",
                  "seconds"
               ],
               "value": 45
            },
            {
               "name": "vapors-extraction#enabled",
               "type": "bool",
               "value": 1
            },
            {
               "name": "vapors-extraction#duration",
               "type": "time",
               "units": [
                  "minutes",
                  "seconds"
               ],
               "value": 45
            },
            {
               "name": "motor#enabled",
               "type": "bool",
               "value": 1
            },
            {
               "name": "motor#speed",
               "type": "float",
               "unity": "RPM",
               "value": 50,
               "floatMin": 0,
               "floatMax": 100,
               "floatStep": 5
            },
            {
               "name": "motor#reverseEnabled",
               "type": "bool",
               "value": 1
            },
            {
               "name": "motor#reverseTime",
               "type": "time",
               "units": [
                  "seconds"
               ],
               "value": 1
            }
         ]
      },
      {
         "name": "container-emptying",
         "fields": [
            {
               "name": "emptying#ox",
               "type": "bool",
               "value": 0
            },
            {
               "name": "emptying#rd",
               "type": "bool",
               "value": 0
            },
            {
               "name": "emptying#act",
               "type": "bool",
               "value": 0
            },
            {
               "name": "emptying#edi",
               "type": "bool",
               "value": 0
            }
         ]
      }
   ],
   "profilePremades": [
      {
         "id": "e169eea9-1014-45b2-a055-d62c68f9b236",
         "skeleton": "default",
         "name": "usl",
         "values": [
            {"key": "met-nozzles#met-high", "value": 1},
            {"key": "met-nozzles#met-medium", "value": 1},
            {"key": "met-nozzles#met-low", "value": 1},
            {"key": "motor#enabled", "value": 1},
            {"key": "motor#speed", "value": 50},
            {"key": "motor#reverseEnabled", "value": 1},
            {"key": "motor#reverseTime", "value": 5},
            {"key": "activation#enabled", "value": 1},
            {"key": "activation#timeOn", "value": 5},
            {"key": "activation#timeOff", "value": 10},
            {"key": "activation#count", "value": 3},
            {"key": "wash1#enabled", "value": 1},
            {"key": "wash1#duration", "value": 35},
            {"key": "metalization#enabled", "value": 1},
            {"key": "metalization#timeOn", "value": 6},
            {"key": "metalization#timeOff", "value": 10},
            {"key": "metalization#count", "value": 10},
            {"key": "metalization-wash#enabled", "value": 0},
            {"key": "metalization-wash#duration", "value": 5},
            {"key": "wash2#enabled", "value": 1},
            {"key": "wash2#duration", "value": 35},
            {"key": "drying#enabled", "value": 1},
            {"key": "drying#duration", "value": 120},
            {"key": "vapors-extraction#enabled", "value": 1},
            {"key": "vapors-extraction#duration", "value": 45}
         ]
      },
      {
         "id": "6928ab09-f176-485e-b479-de8611a0e8f9",
         "skeleton": "default",
         "name": "usl-retake",
         "values": [
            {"key": "met-nozzles#met-high", "value": 1},
            {"key": "met-nozzles#met-medium", "value": 1},
            {"key": "met-nozzles#met-low", "value": 1},
            {"key": "motor#enabled", "value": 1},
            {"key": "motor#speed", "value": 50},
            {"key": "motor#reverseEnabled", "value": 1},
            {"key": "motor#reverseTime", "value": 5},
            {"key": "activation#enabled", "value": 0},
            {"key": "activation#timeOn", "value": 5},
            {"key": "activation#timeOff", "value": 10},
            {"key": "activation#count", "value": 3},
            {"key": "wash1#enabled", "value": 1},
            {"key": "wash1#duration", "value": 35},
            {"key": "metalization#enabled", "value": 1},
            {"key": "metalization#timeOn", "value": 6},
            {"key": "metalization#timeOff", "value": 10},
            {"key": "metalization#count", "value": 10},
            {"key": "metalization-wash#enabled", "value": 0},
            {"key": "metalization-wash#duration", "value": 5},
            {"key": "wash2#enabled", "value": 1},
            {"key": "wash2#duration", "value": 35},
            {"key": "drying#enabled", "value": 1},
            {"key": "drying#duration", "value": 120},
            {"key": "vapors-extraction#enabled", "value": 1},
            {"key": "vapors-extraction#duration", "value": 45}
         ]
      },
      {
         "id": "c87d1e28-a60b-407d-b953-a6a305d3988f",
         "skeleton": "default",
         "name": "usl-activation-porous",
         "values": [
            {"key": "met-nozzles#met-high", "value": 1},
            {"key": "met-nozzles#met-medium", "value": 1},
            {"key": "met-nozzles#met-low", "value": 1},
            {"key": "motor#enabled", "value": 1},
            {"key": "motor#speed", "value": 50},
            {"key": "motor#reverseEnabled", "value": 1},
            {"key": "motor#reverseTime", "value": 5},
            {"key": "activation#enabled", "value": 1},
            {"key": "activation#timeOn", "value": 5},
            {"key": "activation#timeOff", "value": 10},
            {"key": "activation#count", "value": 3},
            {"key": "wash1#enabled", "value": 1},
            {"key": "wash1#duration", "value": 35},
            {"key": "metalization#enabled", "value": 0},
            {"key": "metalization#timeOn", "value": 6},
            {"key": "metalization#timeOff", "value": 10},
            {"key": "metalization#count", "value": 10},
            {"key": "metalization-wash#enabled", "value": 0},
            {"key": "metalization-wash#duration", "value": 5},
            {"key": "wash2#enabled", "value": 0},
            {"key": "wash2#duration", "value": 35},
            {"key": "drying#enabled", "value": 0},
            {"key": "drying#duration", "value": 120},
            {"key": "vapors-extraction#enabled", "value": 1},
            {"key": "vapors-extraction#duration", "value": 45}
         ]
      },
      {
         "id": "57f42552-93ff-4c84-9750-7ff164366ed8",
         "skeleton": "container-emptying",
         "name": "container-emptying-reactives",
         "values": [
            {"key": "emptying#ox", "value": 1},
            {"key": "emptying#rd", "value": 1},
            {"key": "emptying#act", "value": 1},
            {"key": "emptying#edi", "value": 0}
         ]
      }
   ],
   "maintenance": [
      {
         "name": "mfm-filter",
         "durationType": "cycle",
         "durationLimit": 50
      },
      {
         "name": "sensor-cleaning",
         "durationType": "cycle",
         "durationLimit": 8
      },
      {
         "name": "nozzle-cleaning",
         "durationType": "cycle",
         "durationLimit": 16
      }
   ],
   "cyclePremades": [
      {
         "name": "usl",
         "profile": "e169eea9-1014-45b2-a055-d62c68f9b236",
         "cycle": "default"
      },
      {
         "name": "usl-retake",
         "profile": "6928ab09-f176-485e-b479-de8611a0e8f9",
         "cycle": "default"
      },
      {
         "name": "usl-activation-porous",
         "profile": "c87d1e28-a60b-407d-b953-a6a305d3988f",
         "cycle": "default"
      },
      {
         "name": "container-emptying",
         "profile": "57f42552-93ff-4c84-9750-7ff164366ed8",
         "cycle": "container-emptying"
      },
      {
         "name": "nozzle-cleaning",
         "cycle": "nozzle-cleaning"
      }
   ],
   "cycleTypes": [
      {
         "name": "default",
         "runConditions": [
            {
               "name": "emergency-stop",
               "startOnly": false,
               "checkchain": {
                  "io": {
                     "gateName": "emergency-stop",
                     "gateValue": 1
                  }
               }
            },
            {
               "name": "air-sensor",
               "startOnly": false,
               "checkchain": {
                  "io": {
                     "gateName": "air-sensor",
                     "gateValue": 1
                  }
               }
            },
            {
               "name": "cover-closed",
               "startOnly": false,
               "checkchain": {
                  "io": {
                     "gateName": "cover-closed",
                     "gateValue": 1
                  }
               }
            },
            {
               "name": "levels#eff-max-n",
               "startOnly": false,
               "checkchain": {
                  "io": {
                     "gateName": "levels#eff-max-n",
                     "gateValue": 1
                  }
               }
            },
            {
               "name": "eff-container-sensor",
               "startOnly": false,
               "checkchain": {
                  "io": {
                     "gateName": "eff-container-sensor",
                     "gateValue": 1
                  }
               }
            },
            {
               "name": "maintenance-filter",
               "startOnly": true,
               "checkchain": {
                  "parameter": {"maintenance_status": "mfm-filter"}
               }
            },
            {
               "name": "sensor-cleaning",
               "startOnly": true,
               "checkchain": {
                  "parameter": {"maintenance_status": ["sensor-cleaning", 1]}
               }
            },
            {
               "name": "nozzle-cleaning",
               "startOnly": true,
               "checkchain": {
                  "parameter": {"maintenance_status": ["nozzle-cleaning", 1]}
               }
            },
            {
               "name": "activator-life",
               "startOnly": true,
               "checkchain": {
                  "parameter": {"product_status": {"string": "act"}}
               },
               "disabled": { "reverse": {"profile": "activation#enabled"}}
            },
            {
               "name": "oxydiser-life",
               "startOnly": true,
               "checkchain": {
                  "parameter": {"product_status": {"string": "ox"}}
               },
               "disabled": {"reverse": {"profile": "metalization#enabled"}}
            },
            {
               "name": "reducer-life",
               "startOnly": true,
               "checkchain": {
                  "parameter": {"product_status": {"string": "rd"}}
               },
               "disabled": { "reverse": {"profile": "metalization#enabled"}}
            }
         ],
         "steps": [
            {
               "name": "start",
               "isEnabled": 1,
               "startBlocks": [
                  {"io_write": ["ventilation", 1]},
                  {"io_write": ["air-heater", 1]},
                  {"io_write": ["met#air-cleaning", 1]}
               ],
               "endBlocks": [
                  {"io_write": ["met#air-cleaning", 0]},
                  {"io_write": ["motor#speed", {"multiply": [{"profile": "motor#speed"}, {"profile": "motor#enabled"}]}]},
                  {"if": {
                     "statement": {
                        "comparator": "==",
                        "left_side": {"profile": "motor#reverseEnabled"},
                        "right_side": 1
                     },
                     "true_blocks": [{
                        "start_timer": {
                           "timer_name": "motorRotation",
                           "timer_interval": {"profile": "motor#reverseTime"},
                           "blocks": [
                              {"io_write": ["motor#direction", {"reverse": {"io_read": "motor#direction"}}]}
                           ]
                        }
                     }]
                  }}
               ],
               "blocks": [
                  {"sleep": 15}
               ]
            },
            {
               "name": "activation",
               "isEnabled": { "profile": "activation#enabled" },
               "runConditions": [
                  {
                     "name": "levels#act-min-n",
                     "startOnly": false,
                     "checkchain": {
                        "io": {
                           "gateName": "levels#act-min-n",
                           "gateValue": 1
                        }
                     },
                     "disabled": {"reverse": {"profile": "activation#enabled"}}
                  }
               ],
               "crashStepFallback": 4,
               "startBlocks": [
                  {"io_write": ["hybrid#act-res", 1]}
               ],
               "endBlocks": [
                  {"io_write": ["hybrid#act-res", 0]}
               ],
               "blocks": [
                  {"for": {
                     "limit": {"profile": "activation#count"},
                     "blocks": [
                        {"io_write": ["hybrid#plv", 1]},
                        {"sleep": 0.25},
                        {"io_write": ["hybrid#act-lq", 1]},
                        {"sleep": {"profile": "activation#timeOn"}},
                        {"io_write": ["hybrid#act-lq", 0]},
                        {"sleep": 0.25},
                        {"io_write": ["hybrid#plv", 0]},
                        {"sleep": {"profile": "activation#timeOff"}}
                     ]
                  }}
               ]
            },
            {
               "name": "wash1",
               "isEnabled": {"profile": "wash1#enabled"},
               "crashStepFallback": 6,
               "runConditions": [
                  {
                     "name": "levels#edi-min-n",
                     "startOnly": false,
                     "checkchain": {
                        "io": {
                           "gateName": "levels#edi-min-n",
                           "gateValue": 1
                        }
                     }
                  }
               ],
               "startBlocks": [
                  {"io_write": ["hybrid#edi-res", 1]},
                  {"io_write": ["hybrid#plv", 1]}
               ],
               "endBlocks": [
                  {"io_write": ["hybrid#edi-res", 0]},
                  {"io_write": ["hybrid#plv", 0]}
               ],
               "blocks": [
                  {"sleep": 0.25},
                  {"io_write": ["hybrid#edi-lq", 1]},

                  {"sleep": {"profile": "wash1#duration"}},

                  {"io_write": ["hybrid#edi-lq", 0]},
                  {"sleep": 0.25}
               ]
            },
            {
               "name": "metalization",
               "isEnabled": {"profile": "metalization#enabled"},
               "runConditions": [
                  {
                     "name": "levels#ox-min-n",
                     "startOnly": false,
                     "checkchain": {
                        "io": {
                           "gateName": "levels#ox-min-n",
                           "gateValue": 1
                        }
                     },
                     "disabled": { "reverse": {"profile": "metalization#enabled"}}
                  },
                  {
                     "name": "levels#rd-min-n",
                     "startOnly": false,
                     "checkchain": {
                        "io": {
                           "gateName": "levels#rd-min-n",
                           "gateValue": 1
                        }
                     },
                     "disabled": { "reverse": {"profile": "metalization#enabled"}}
                  }
               ],
               "crashStepFallback": 4,
               "startBlocks": [
                  {"io_write": ["met#ox-res", 1]},
                  {"io_write": ["met#rd-res", 1]},
                  {"io_write": ["regulators#power", 1]},
                  {"sleep": 3},
                  {"io_write": ["regulators#rd-pressure", {"read_machine_var": "rd-pressure"}]},
                  {"io_write": ["regulators#ox-pressure", {"read_machine_var": "ox-pressure"}]}
               ],
               "endBlocks": [
                  {"io_write": ["met#ox-res", 0]},
                  {"io_write": ["met#rd-res", 0]},
                  {"io_write": ["regulators#rd-pressure", 0]},
                  {"io_write": ["regulators#ox-pressure", 0]},
                  {"sleep": 3},
                  {"io_write": ["regulators#power", 0]}
               ],
               "blocks": [
                  {"sleep": 0.25 },
                  {"for": {
                     "limit": {"profile": "metalization#count"},
                     "blocks": [{"if": {
                        "statement": {
                           "comparator": "==",
                           "left_side": {"profile": "met-nozzles#met-high"},
                           "right_side": 1
                        },
                        "true_blocks": [
                           {"io_write": ["met#plv-high", 1]},
                           {"sleep": 0.25},
                           {"io_write": ["met#met-lq-high", 1]},
                           {"sleep": {"profile": "metalization#timeOn"}},
                           {"io_write": ["met#met-lq-high", 0]},
                           {"sleep": 0.25},
                           {"io_write": ["met#plv-high", 0]}
                        ]
                     }},
                     {"if": {
                        "statement": {
                           "comparator": "==",
                           "left_side": {"profile": "met-nozzles#met-medium"},
                           "right_side": 1
                        },
                        "true_blocks": [
                           {"io_write": ["met#plv-mid", 1]},
                           {"sleep": 0.25},
                           {"io_write": ["met#met-lq-mid", 1]},
                           {"sleep": {"profile": "metalization#timeOn"}},
                           {"io_write": ["met#met-lq-mid", 0]},
                           {"sleep": 0.25},
                           {"io_write": ["met#plv-mid", 0]}
                        ]
                     }},
                     {"if": {
                        "statement": {
                           "comparator": "==",
                           "left_side": {"profile": "met-nozzles#met-low"},
                           "right_side": 1
                        },
                        "true_blocks": [
                           {"io_write": ["met#plv-low", 1]},
                           {"sleep": 0.25},
                           {"io_write": ["met#met-lq-low", 1]},
                           {"sleep": {"profile": "metalization#timeOn"}},
                           {"io_write": ["met#met-lq-low", 0]},
                           {"sleep": 0.25},
                           {"io_write": ["met#plv-low", 0]}
                        ]
                     }},
                     {"sleep": {"profile": "metalization#timeOff"}},
                     {"if": {
                        "statement": {
                           "comparator": "==",
                           "left_side": {"profile": "metalization-wash#enabled"},
                           "right_side": 1
                        },
                        "true_blocks": [
                           {"io_write": ["hybrid#edi-res", 1]},

                           {"io_write": ["hybrid#plv", 1]},
                           
                           {"sleep": 0.25},

                           {"io_write": ["hybrid#edi-lq", 1]},

                           {"sleep": {"profile": "metalization-wash#duration"}},

                           {"io_write": ["hybrid#edi-lq", 0]},
                           {"sleep": 0.25},
                        
                           {"io_write": ["hybrid#plv", 0]},

                           {"io_write": ["hybrid#edi-res", 0]}
                        ]
                     }}
                  ]
                  }},
                  {"sleep": 0.25 },
                  {"append_maintenance": ["mfm-filter", 1]},
                  {"append_maintenance": ["sensor-cleaning", 1]},
                  {"append_maintenance": ["nozzle-cleaning", 1]}
               ]
            },
            {
               "name": "nozzle-cleaning",
               "isEnabled": {"profile": "metalization#enabled"},
               "startBlocks": [],
               "endBlocks": [],
               "blocks": [
                  {"for": {
                     "limit": 6,
                     "blocks": [
                        {"io_write": ["met#air-cleaning", 1]},
                        {"sleep": 5},
                        {"io_write": ["met#air-cleaning", 0]},
                        {"sleep": 5}
                     ]
                  }},
                  {"for": {
                     "limit": 6,
                     "blocks": [
                        {"io_write": ["hybrid#air-cleaning", 1]},
                        {"sleep": 5},
                        {"io_write": ["hybrid#air-cleaning", 0]},
                        {"sleep": 5}
                     ]
                  }}
               ]
            },
            {
               "name": "wash2",
               "isEnabled": {"profile": "wash2#enabled"},
               "crashStepFallback": 6,
               "runConditions": [
                  {
                     "name": "levels#edi-min-n",
                     "startOnly": false,
                     "checkchain": {
                        "io": {
                           "gateName": "levels#edi-min-n",
                           "gateValue": 1
                        }
                     }
                  }
               ],
               "startBlocks": [
                  {"io_write": ["hybrid#edi-res", 1]},
                  {"io_write": ["hybrid#plv", 1]}
               ],
               "endBlocks": [
                  {"io_write": ["hybrid#edi-res", 0]},
                  {"io_write": ["hybrid#plv", 0]}
               ],
               "blocks": [
                  {"sleep": 0.25},
                  {"io_write": ["hybrid#edi-lq", 1]},

                  {"sleep": {"profile": "wash2#duration"}},

                  {"io_write": ["hybrid#edi-lq", 0]},
                  {"sleep": 0.25}
               ]
            },
            {
               "name": "drying",
               "isEnabled": {"profile": "drying#enabled"},
               "startBlocks": [
                  {"io_write": ["met#plv-mid", 1]}
               ],
               "endBlocks": [
                  {"io_write": ["met#plv-mid", 0]}
               ],
               "blocks": [
                  {"sleep": {"profile": "drying#duration"}}
               ]
            },
            {
               "name": "vapors-extraction",
               "isEnabled": {"profile": "vapors-extraction#enabled"},
               "startBlocks": [],
               "endBlocks": [
                  {"io_write": ["ventilation", 0]},
                  {"io_write": ["motor#speed", 0]}
               ],
               "blocks": [
                  {"sleep": {"profile": "vapors-extraction#duration"}}
               ]
            }
         ],
         "profileRequired": true
      },
      {
         "name": "act-fill",
         "profileRequired": false,
         "runConditions": [
            {
               "name": "emergency-stop",
               "startOnly": false,
               "checkchain": {
                  "io": {
                     "gateName": "emergency-stop",
                     "gateValue": 1
                  }
               }
            },
            {
               "name": "air-sensor",
               "startOnly": false,
               "checkchain": {
                  "io": {
                     "gateName": "air-sensor",
                     "gateValue": 1
                  }
               }
            },
            {
               "name": "cover-closed",
               "startOnly": false,
               "checkchain": {
                  "io": {
                     "gateName": "cover-closed",
                     "gateValue": 1
                  }
               }
            },
            {
               "name": "levels#edi-min-n",
               "startOnly": false,
               "checkchain": {
                  "io": {
                     "gateName": "levels#edi-min-n",
                     "gateValue": 1
                  }
               }
            }
         ],
         "steps": [
            {
               "name": "act-fill",
               "isEnabled": 1,
               "blocks": [
                  {"while": {
                     "statement": {
                        "comparator": "!=",
                        "left_side": {"io_read": "levels#act-max-n"},
                        "right_side": 1
                     },
                     "blocks": [{"sleep": 0.5}]
                  }}
               ],
               "startBlocks": [
                  {"io_write": ["hybrid#lq-fill-act", 1]},
                  {"io_write": ["hybrid#edi-res", 1]},
                  {"start_timer": {
                     "timer_name": "timeoutError",
                     "timer_interval": 120,
                     "blocks": [{"stop": "activator-timed-out"}]
                  }}
               ],
               "endBlocks": [
                  {"io_write": ["hybrid#lq-fill-act", 0]},
                  {"io_write": ["hybrid#edi-res", 0]},
                  {"load_container": ["act", "usl_act"]},
                  {"stop_timer": "timeoutError"}
               ]
            }
         ]
      },
      {
         "name": "container-emptying",
         "profileRequired": true,
         "runConditions": [
            {
               "name": "emergency-stop",
               "startOnly": false,
               "checkchain": {
                  "io": {
                     "gateName": "emergency-stop",
                     "gateValue": 1
                  }
               }
            },
            {
               "name": "air-sensor",
               "startOnly": false,
               "checkchain": {
                  "io": {
                     "gateName": "air-sensor",
                     "gateValue": 1
                  }
               }
            },
            {
               "name": "cover-closed",
               "startOnly": false,
               "checkchain": {
                  "io": {
                     "gateName": "cover-closed",
                     "gateValue": 1
                  }
               }
            },
            {
               "name": "levels#eff-max-n",
               "startOnly": false,
               "checkchain": {
                  "io": {
                     "gateName": "levels#eff-max-n",
                     "gateValue": 1
                  }
               }
            },
            {
               "name": "eff-container-sensor",
               "startOnly": false,
               "checkchain": {
                  "io": {
                     "gateName": "eff-container-sensor",
                     "gateValue": 1
                  }
               }
            }
         ],
         "steps": [
            {
               "name": "container-emptying",
               "isEnabled": 1,
               "startBlocks": [

                  {"if": {
                     "statement": {
                        "comparator": "==",
                        "left_side": {"add": [{"profile": "emptying#act"}, {"profile": "emptying#edi"}]},
                        "right_side": 2
                     },
                     "true_blocks": [{"stop": "container-emptying-profile-invalid"}]
                  }},

                  {"io_write": ["ventilation", 1]},

                  {"if": {
                     "statement": {
                        "comparator": "==",
                        "left_side": {"profile": "emptying#ox"},
                        "right_side": 1
                     },
                     "true_blocks": [
                        {"io_write": ["met#ox-res", 1]},
                        {"io_write": ["regulators#power", 1]},
                        {"io_write": ["regulators#ox-pressure", 0.4]},
                        {"io_write": ["met#met-lq-high", 1]},
                        {"io_write": ["met#met-lq-mid", 1]},
                        {"io_write": ["met#met-lq-low", 1]}
                     ]
                  }},

                  {"if": {
                     "statement": {
                        "comparator": "==",
                        "left_side": {"profile": "emptying#rd"},
                        "right_side": 1
                     },
                     "true_blocks": [
                        {"io_write": ["met#rd-res", 1]},
                        {"io_write": ["regulators#power", 1]},
                        {"io_write": ["regulators#rd-pressure", 0.4]},
                        {"io_write": ["met#met-lq-high", 1]},
                        {"io_write": ["met#met-lq-mid", 1]},
                        {"io_write": ["met#met-lq-low", 1]}
                     ]
                  }},

                  {"if": {
                     "statement": {
                        "comparator": "==",
                        "left_side": {"profile": "emptying#act"},
                        "right_side": 1
                     },
                     "true_blocks": [
                        {"io_write": ["hybrid#act-res", 1]},
                        {"io_write": ["hybrid#act-lq", 1]}
                     ]
                  }},

                  {"if": {
                     "statement": {
                        "comparator": "==",
                        "left_side": {"profile": "emptying#edi"},
                        "right_side": 1
                     },
                     "true_blocks": [
                        {"io_write": ["hybrid#edi-res", 1]},
                        {"io_write": ["hybrid#edi-lq", 1]}
                     ]
                  }}
               ],
               "endBlocks": [
                  {"io_write": ["ventilation", 0]},
                  {"io_write": ["regulators#power", 0]},

                  {"if": {
                     "statement": {
                        "comparator": "==",
                        "left_side": {"profile": "emptying#ox"},
                        "right_side": 1
                     },
                     "true_blocks": [
                        {"io_write": ["met#ox-res", 0]},
                        {"io_write": ["regulators#ox-pressure", 0]},
                        {"io_write": ["met#met-lq-high", 0]},
                        {"io_write": ["met#met-lq-mid", 0]},
                        {"io_write": ["met#met-lq-low", 0]},
                        {"unload_container": "ox"}
                     ]
                  }},

                  {"if": {
                     "statement": {
                        "comparator": "==",
                        "left_side": {"profile": "emptying#rd"},
                        "right_side": 1
                     },
                     "true_blocks": [
                        {"io_write": ["met#rd-res", 0]},
                        {"io_write": ["regulators#ox-pressure", 0]},
                        {"io_write": ["met#met-lq-high", 0]},
                        {"io_write": ["met#met-lq-mid", 0]},
                        {"io_write": ["met#met-lq-low", 0]},
                        {"unload_container": "rd"}

                     ]
                  }},

                  {"if": {
                     "statement": {
                        "comparator": "==",
                        "left_side": {"profile": "emptying#act"},
                        "right_side": 1
                     },
                     "true_blocks": [
                        {"io_write": ["hybrid#act-res", 0]},
                        {"io_write": ["hybrid#act-lq", 0]},
                        {"unload_container": "act"}
                     ]
                  }},

                  {"if": {
                     "statement": {
                        "comparator": "==",
                        "left_side": {"profile": "emptying#edi"},
                        "right_side": 1
                     },
                     "true_blocks": [
                        {"io_write": ["hybrid#edi-res", 0]},
                        {"io_write": ["hybrid#edi-lq", 0]}
                     ]
                  }}
               ],
               "blocks": [
                  {"while": {
                     "statement": {
                        "comparator": "!=",
                        "left_side": {"add": [
                           {"multiply": [{"io_read": "levels#act-min-n"}, {"profile": "emptying#act"}]},
                           {"multiply": [{"io_read": "levels#rd-min-n"}, {"profile": "emptying#rd"}]},
                           {"multiply": [{"io_read": "levels#ox-min-n"}, {"profile": "emptying#ox"}]},
                           {"multiply": [{"io_read": "levels#edi-min-n"}, {"profile": "emptying#edi"}]}
                        ]},
                        "right_side": 0
                     },
                     "blocks": [{"sleep": 2}]
                  }},
                  {"sleep": 10}
               ]
            }
         ]
      },
      {
         "name": "nozzle-cleaning",
         "profileRequired": false,
         "runConditions": [
            {
               "name": "emergency-stop",
               "startOnly": false,
               "checkchain": {
                  "io": {
                     "gateName": "emergency-stop",
                     "gateValue": 1
                  }
               }
            },
            {
               "name": "air-sensor",
               "startOnly": false,
               "checkchain": {
                  "io": {
                     "gateName": "air-sensor",
                     "gateValue": 1
                  }
               }
            },
            {
               "name": "cover-closed",
               "startOnly": false,
               "checkchain": {
                  "io": {
                     "gateName": "cover-closed",
                     "gateValue": 1
                  }
               }
            }
         ],
         "steps": [
            {
               "name": "nozzle-cleaning",
               "isEnabled": 1,
               "startBlocks": [{"io_write": ["ventilation", 1]}],
               "endBlocks": [{"io_write": ["ventilation", 0]}],
               "blocks": [
                  {"for": {
                     "limit": 6,
                     "blocks": [
                        {"io_write": ["met#air-cleaning", 1]},
                        {"sleep": 5},
                        {"io_write": ["met#air-cleaning", 0]},
                        {"sleep": 5}
                     ]
                  }},
                  {"for": {
                     "limit": 6,
                     "blocks": [
                        {"io_write": ["hybrid#air-cleaning", 1]},
                        {"sleep": 5},
                        {"io_write": ["hybrid#air-cleaning", 0]},
                        {"sleep": 5}
                     ]
                  }}
               ]
            }
         ]
      }
   ],
   "addons": [
      {
         "addonName": "cem",
         "content": [
            {
               "path": "profilePremades",
               "mode": "merge",
               "content": [
                  {
                     "id": "ba719444-7795-4c16-aa3f-2768c214c9e5",
                     "skeleton": "default",
                     "name": "cem",
                     "values": [
                        {"key": "met-nozzles#met-high", "value": 1},
                        {"key": "met-nozzles#met-medium", "value": 1},
                        {"key": "met-nozzles#met-low", "value": 1},
                        {"key": "motor#enabled", "value": 1},
                        {"key": "motor#speed", "value": 50},
                        {"key": "motor#reverseEnabled", "value": 1},
                        {"key": "motor#reverseTime", "value": 5},
                        {"key": "activation#enabled", "value": 1},
                        {"key": "activation#timeOn", "value": 5},
                        {"key": "activation#timeOff", "value": 10},
                        {"key": "activation#count", "value": 3},
                        {"key": "wash1#enabled", "value": 1},
                        {"key": "wash1#duration", "value": 35},
                        {"key": "metalization#enabled", "value": 1},
                        {"key": "metalization#timeOn", "value": 6},
                        {"key": "metalization#timeOff", "value": 10},
                        {"key": "metalization#count", "value": 20},
                        {"key": "metalizationWash#enabled", "value": 0},
                        {"key": "metalizationWash#duration", "value": 5},
                        {"key": "wash2#enabled", "value": 1},
                        {"key": "wash2#duration", "value": 35},
                        {"key": "drying#enabled", "value": 1},
                        {"key": "drying#duration", "value": 120},
                        {"key": "vapors-extraction#enabled", "value": 1},
                        {"key": "vapors-extraction#duration", "value": 45}
                     ]
                  },
                  {
                     "skeleton": "default",
                     "id": "b756c8b0-a366-4423-a74b-3126e66b2fa4",
                     "name": "cem-retake",
                     "values": [
                        {"key": "met-nozzles#met-high", "value": 1},
                        {"key": "met-nozzles#met-medium", "value": 1},
                        {"key": "met-nozzles#met-low", "value": 1},
                        {"key": "motor#enabled", "value": 1},
                        {"key": "motor#speed", "value": 50},
                        {"key": "motor#reverseEnabled", "value": 1},
                        {"key": "motor#reverseTime", "value": 5},
                        {"key": "activation#enabled", "value": 0},
                        {"key": "activation#timeOn", "value": 5},
                        {"key": "activation#timeOff", "value": 10},
                        {"key": "activation#count", "value": 3},
                        {"key": "wash1#enabled", "value": 1},
                        {"key": "wash1#duration", "value": 35},
                        {"key": "metalization#enabled", "value": 1},
                        {"key": "metalization#timeOn", "value": 6},
                        {"key": "metalization#timeOff", "value": 10},
                        {"key": "metalization#count", "value": 20},
                        {"key": "metalization-wash#enabled", "value": 0},
                        {"key": "metalization-wash#duration", "value": 5},
                        {"key": "wash2#enabled", "value": 1},
                        {"key": "wash2#duration", "value": 35},
                        {"key": "drying#enabled", "value": 1},
                        {"key": "drying#duration", "value": 120},
                        {"key": "vapors-extraction#enabled", "value": 1},
                        {"key": "vapors-extraction#duration", "value": 45}
                     ]
                  }
               ]
            },
            {
               "path": "cyclePremades",
               "mode": "merge",
               "content": [
                  {
                     "name": "cem",
                     "profile": "ba719444-7795-4c16-aa3f-2768c214c9e5",
                     "cycle": "default"
                  },
                  {
                     "name": "cem-retake",
                     "profile": "b756c8b0-a366-4423-a74b-3126e66b2fa4",
                     "cycle": "default"
                  }
               ]
            }
         ]
      },
      {
         "addonName": "llc",
         "content": [
            {
               "path": "profilePremades",
               "mode": "merge",
               "content": [
                  {
                     "id": "4474321d-7676-4925-b918-5e5b7cb7925a",
                     "skeleton": "default",
                     "name": "llc",
                     "values": [
                        {"key": "met-nozzles#met-high", "value": 1},
                        {"key": "met-nozzles#met-medium", "value": 1},
                        {"key": "met-nozzles#met-low", "value": 1},
                        {"key": "motor#enabled", "value": 1},
                        {"key": "motor#speed", "value": 50},
                        {"key": "motor#reverseEnabled", "value": 1},
                        {"key": "motor#reverseTime", "value": 5},
                        {"key": "activation#enabled", "value": 1},
                        {"key": "activation#timeOn", "value": 5},
                        {"key": "activation#timeOff", "value": 10},
                        {"key": "activation#count", "value": 3},
                        {"key": "wash1#enabled", "value": 1},
                        {"key": "wash1#duration", "value": 30},
                        {"key": "metalization#enabled", "value": 1},
                        {"key": "metalization#timeOn", "value": 5},
                        {"key": "metalization#timeOff", "value": 10},
                        {"key": "metalization#count", "value": 8},
                        {"key": "metalization-wash#enabled", "value": 1},
                        {"key": "metalization-wash#duration", "value": 5},
                        {"key": "wash2#enabled", "value": 1},
                        {"key": "wash2#duration", "value": 30},
                        {"key": "drying#enabled", "value": 1},
                        {"key": "drying#duration", "value": 120},
                        {"key": "vapors-extraction#enabled", "value": 1},
                        {"key": "vapors-extraction#duration", "value": 45}
                     ]
                  }
               ]
            },
            {
               "path": "cyclePremades",
               "mode": "merge",
               "content": [
                  {
                     "name": "llc",
                     "profile": "4474321d-7676-4925-b918-5e5b7cb7925a",
                     "cycle": "default"
                  }
               ]
            },
            {
               "path": "containers.0.supportedProductSeries",
               "mode": "merge",
               "content": ["llc_ox"]
            },
            {
               "path": "containers.1.supportedProductSeries",
               "mode": "merge",
               "content": ["llc_rd"]
            }
         ]
      }
   ],
   "variables": ["rd-pressure", "ox-pressure"]
}