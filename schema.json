{
  "$ref": "#/definitions/IMachine",
  "$schema": "http://json-schema.org/draft-07/schema#",
  "definitions": {
    "EProductSeries": {
      "description": "Product series TODO: Make this only available for offline devices",
      "enum": [
        "llc",
        "usl",
        "tc",
        "bc",
        "wr",
        "cr"
      ],
      "type": "string"
    },
    "ESlotSensorType": {
      "description": "Slot sensor type",
      "enum": [
        "level-min-n",
        "level-max-n",
        "level-a",
        "level-np",
        "temperature"
      ],
      "type": "string"
    },
    "IAdditionParameterBlock": {
      "additionalProperties": false,
      "properties": {
        "name": {
          "const": "add",
          "description": "Parameter block name",
          "type": "string"
        },
        "params": {
          "description": "Parameter block sub parameters blocks",
          "items": {
            "$ref": "#/definitions/INumericParameterBlock"
          },
          "type": "array"
        },
        "value": {
          "description": "Value from this parameter block",
          "type": [
            "string",
            "number"
          ]
        }
      },
      "required": [
        "name",
        "params"
      ],
      "type": "object"
    },
    "ICallToAction": {
      "additionalProperties": false,
      "description": "Call to action inteface",
      "properties": {
        "APIEndpoint": {
          "additionalProperties": false,
          "description": "API Endpoint to be reached by the CTA (NusterTurbine Endpoints)",
          "properties": {
            "method": {
              "description": "HTTP Request Method",
              "enum": [
                "get",
                "put",
                "post",
                "delete"
              ],
              "type": "string"
            },
            "url": {
              "description": "URL Reached",
              "type": "string"
            }
          },
          "required": [
            "url",
            "method"
          ],
          "type": "object"
        },
        "UIEndpoint": {
          "description": "UIEndpoint reached by the CTA (NusterDesktop Endpoints)",
          "type": "string"
        },
        "name": {
          "description": "Name of this CTA",
          "type": "string"
        }
      },
      "required": [
        "name"
      ],
      "type": "object"
    },
    "IConditionalParameterBlock": {
      "additionalProperties": false,
      "properties": {
        "name": {
          "const": "conditional",
          "description": "Parameter block name",
          "type": "string"
        },
        "params": {
          "description": "Parameter block sub parameters blocks",
          "items": [
            {
              "$ref": "#/definitions/INumericParameterBlock"
            },
            {
              "$ref": "#/definitions/INumericParameterBlock"
            },
            {
              "anyOf": [
                {
                  "$ref": "#/definitions/INumericParameterBlock"
                },
                {
                  "$ref": "#/definitions/IStringParameterBlock"
                }
              ]
            },
            {
              "anyOf": [
                {
                  "$ref": "#/definitions/INumericParameterBlock"
                },
                {
                  "$ref": "#/definitions/IStringParameterBlock"
                }
              ]
            }
          ],
          "maxItems": 4,
          "minItems": 4,
          "type": "array"
        },
        "value": {
          "description": "Value from this parameter block",
          "enum": [
            ">",
            "<",
            "==",
            "!="
          ],
          "type": "string"
        }
      },
      "required": [
        "name",
        "params",
        "value"
      ],
      "type": "object"
    },
    "IConfigMaintenance": {
      "additionalProperties": false,
      "description": "Maintenance configuration base object",
      "properties": {
        "duration": {
          "description": "Maintenance task duration",
          "type": "number"
        },
        "durationLimit": {
          "description": "Duration limit of this maintenance task",
          "type": "number"
        },
        "durationType": {
          "description": "Duration type of this maintenance task",
          "type": "string"
        },
        "name": {
          "description": "Maintenance task name",
          "type": "string"
        },
        "operationDate": {
          "description": "Last operation date",
          "type": "number"
        },
        "procedure": {
          "$ref": "#/definitions/IMaintenanceProcedure",
          "description": "Maintenance procedure"
        }
      },
      "required": [
        "durationLimit",
        "durationType",
        "name"
      ],
      "type": "object"
    },
    "IConfigProfile": {
      "additionalProperties": false,
      "description": "Profiles stored in the configuration `specs.json` file",
      "properties": {
        "isPremade": {
          "description": "Is this profile premade",
          "type": "boolean"
        },
        "modificationDate": {
          "description": "Last profile modification data",
          "type": "number"
        },
        "name": {
          "description": "Profile name",
          "type": "string"
        },
        "overwriteable": {
          "description": "Is this profile overwritable",
          "type": "boolean"
        },
        "removable": {
          "description": "Is this profile removable",
          "type": "boolean"
        },
        "skeleton": {
          "description": "Profile Skeleton reference",
          "type": "string"
        },
        "values": {
          "additionalProperties": {
            "type": [
              "number",
              "boolean"
            ]
          },
          "type": "object"
        }
      },
      "required": [
        "isPremade",
        "name",
        "overwriteable",
        "removable",
        "skeleton",
        "values"
      ],
      "type": "object"
    },
    "IConfigSlot": {
      "additionalProperties": false,
      "description": "Slot definition used in config",
      "properties": {
        "callToAction": {
          "description": "Call to action, For UI Purposes only",
          "items": {
            "$ref": "#/definitions/ICallToAction"
          },
          "type": "array"
        },
        "name": {
          "description": "Slots name",
          "type": "string"
        },
        "productOptions": {
          "$ref": "#/definitions/ISlotProductOptions",
          "description": "Production options, If this is set the slot become productable"
        },
        "sensors": {
          "description": "Sensors available for this Slots",
          "items": {
            "$ref": "#/definitions/ISlotSensor"
          },
          "type": "array"
        },
        "type": {
          "description": "Slot type",
          "type": "string"
        }
      },
      "required": [
        "name",
        "type",
        "sensors"
      ],
      "type": "object"
    },
    "IConstantParameterBlock": {
      "additionalProperties": false,
      "properties": {
        "name": {
          "const": "const",
          "description": "Parameter block name",
          "type": "string"
        },
        "params": {
          "description": "Parameter block sub parameters blocks",
          "items": {
            "$ref": "#/definitions/IParameterBlocks"
          },
          "type": "array"
        },
        "value": {
          "description": "Value from this parameter block",
          "type": "number"
        }
      },
      "required": [
        "name",
        "value"
      ],
      "type": "object"
    },
    "IConstantStringParameterBlock": {
      "additionalProperties": false,
      "properties": {
        "name": {
          "const": "conststr",
          "description": "Parameter block name",
          "type": "string"
        },
        "params": {
          "description": "Parameter block sub parameters blocks",
          "items": {
            "$ref": "#/definitions/IParameterBlocks"
          },
          "type": "array"
        },
        "value": {
          "description": "Value from this parameter block",
          "type": "string"
        }
      },
      "required": [
        "name",
        "value"
      ],
      "type": "object"
    },
    "IEX260Controller": {
      "additionalProperties": false,
      "properties": {
        "ip": {
          "description": "IP Address on the local network",
          "type": "string"
        },
        "size": {
          "description": "Corresponding size of the EX260 (either 16 outputs or 32 outputs)",
          "enum": [
            16,
            32
          ],
          "type": "number"
        },
        "type": {
          "const": "ex260sx",
          "description": "Type of the IO Handler",
          "type": "string"
        }
      },
      "required": [
        "ip",
        "size",
        "type"
      ],
      "type": "object"
    },
    "IForLoopProgramBlock": {
      "additionalProperties": false,
      "properties": {
        "blocks": {
          "items": {
            "$ref": "#/definitions/IProgramBlocks"
          },
          "type": "array"
        },
        "currentIteration": {
          "type": "number"
        },
        "executed": {
          "type": "boolean"
        },
        "name": {
          "const": "for",
          "type": "string"
        },
        "params": {
          "items": {
            "$ref": "#/definitions/INumericParameterBlock"
          },
          "maxItems": 1,
          "minItems": 1,
          "type": "array"
        }
      },
      "required": [
        "blocks",
        "name",
        "params"
      ],
      "type": "object"
    },
    "IGroupProgramBlock": {
      "additionalProperties": false,
      "properties": {
        "blocks": {
          "items": {
            "$ref": "#/definitions/IProgramBlocks"
          },
          "type": "array"
        },
        "executed": {
          "type": "boolean"
        },
        "name": {
          "const": "group",
          "type": "string"
        },
        "params": {
          "items": {
            "$ref": "#/definitions/IParameterBlocks"
          },
          "type": "array"
        }
      },
      "required": [
        "blocks",
        "name"
      ],
      "type": "object"
    },
    "IIOProgramBlock": {
      "additionalProperties": false,
      "properties": {
        "blocks": {
          "items": {
            "$ref": "#/definitions/IProgramBlocks"
          },
          "type": "array"
        },
        "executed": {
          "type": "boolean"
        },
        "name": {
          "const": "io",
          "type": "string"
        },
        "params": {
          "items": [
            {
              "$ref": "#/definitions/IStringParameterBlock"
            },
            {
              "$ref": "#/definitions/INumericParameterBlock"
            }
          ],
          "maxItems": 2,
          "minItems": 2,
          "type": "array"
        }
      },
      "required": [
        "name",
        "params"
      ],
      "type": "object"
    },
    "IIOReadParameterBlock": {
      "additionalProperties": false,
      "properties": {
        "name": {
          "const": "io",
          "description": "Parameter block name",
          "type": "string"
        },
        "params": {
          "description": "Parameter block sub parameters blocks",
          "items": {
            "$ref": "#/definitions/IParameterBlocks"
          },
          "type": "array"
        },
        "value": {
          "description": "Value from this parameter block",
          "type": "string"
        }
      },
      "required": [
        "name",
        "value"
      ],
      "type": "object"
    },
    "IIfProgramBlock": {
      "additionalProperties": false,
      "properties": {
        "blocks": {
          "items": {
            "$ref": "#/definitions/IProgramBlocks"
          },
          "type": "array"
        },
        "executed": {
          "type": "boolean"
        },
        "falseBlocks": {
          "items": {
            "$ref": "#/definitions/IProgramBlocks"
          },
          "type": "array"
        },
        "name": {
          "const": "if",
          "type": "string"
        },
        "params": {
          "items": [
            {
              "$ref": "#/definitions/INumericParameterBlock"
            },
            {
              "$ref": "#/definitions/IStringParameterBlock"
            },
            {
              "$ref": "#/definitions/INumericParameterBlock"
            }
          ],
          "maxItems": 3,
          "minItems": 3,
          "type": "array"
        },
        "trueBlocks": {
          "items": {
            "$ref": "#/definitions/IProgramBlocks"
          },
          "type": "array"
        }
      },
      "required": [
        "falseBlocks",
        "name",
        "params",
        "trueBlocks"
      ],
      "type": "object"
    },
    "IMachine": {
      "additionalProperties": false,
      "description": "Machine JSON Specifications",
      "properties": {
        "cyclePremades": {
          "description": "Cycle premades definition",
          "items": {
            "$ref": "#/definitions/IPBRPremades"
          },
          "type": "array"
        },
        "cycleTypes": {
          "description": "Cycle types definition",
          "items": {
            "$ref": "#/definitions/IProgram"
          },
          "type": "array"
        },
        "iogates": {
          "description": "IOGates definition",
          "items": {
            "$ref": "#/definitions/IOGateTypes"
          },
          "type": "array"
        },
        "iohandlers": {
          "description": "IOHandler definitions",
          "items": {
            "$ref": "#/definitions/IOControllers"
          },
          "type": "array"
        },
        "maintenance": {
          "description": "Maintenance tasks definition",
          "items": {
            "$ref": "#/definitions/IConfigMaintenance"
          },
          "type": "array"
        },
        "manual": {
          "description": "Manuals modes definition",
          "items": {
            "$ref": "#/definitions/IManualMode"
          },
          "type": "array"
        },
        "passives": {
          "description": "Passive modes definition",
          "items": {
            "$ref": "#/definitions/IPassive"
          },
          "type": "array"
        },
        "profilePremades": {
          "description": "Premade profile definition",
          "items": {
            "$ref": "#/definitions/IConfigProfile"
          },
          "type": "array"
        },
        "profileSkeletons": {
          "description": "Profile skeletons definition",
          "items": {
            "$ref": "#/definitions/IProfileSkeleton"
          },
          "type": "array"
        },
        "slots": {
          "description": "Product slots definition",
          "items": {
            "$ref": "#/definitions/IConfigSlot"
          },
          "type": "array"
        }
      },
      "required": [
        "cycleTypes",
        "cyclePremades",
        "iohandlers",
        "iogates",
        "maintenance",
        "manual",
        "passives",
        "profileSkeletons",
        "profilePremades",
        "slots"
      ],
      "type": "object"
    },
    "IMaintenanceParameterBlock": {
      "additionalProperties": false,
      "properties": {
        "name": {
          "const": "maintenance",
          "description": "Parameter block name",
          "type": "string"
        },
        "params": {
          "description": "Parameter block sub parameters blocks",
          "items": {
            "$ref": "#/definitions/IParameterBlocks"
          },
          "type": "array"
        },
        "value": {
          "description": "Value from this parameter block",
          "type": "string"
        }
      },
      "required": [
        "name",
        "value"
      ],
      "type": "object"
    },
    "IMaintenanceProcedure": {
      "additionalProperties": false,
      "properties": {
        "steps": {
          "description": "Array of procedure steps",
          "items": {
            "$ref": "#/definitions/IMaintenanceProcedureStep"
          },
          "type": "array"
        },
        "tools": {
          "description": "Procedure Tools used",
          "items": {
            "type": "string"
          },
          "type": "array"
        }
      },
      "required": [
        "tools",
        "steps"
      ],
      "type": "object"
    },
    "IMaintenanceProcedureStep": {
      "additionalProperties": false,
      "properties": {
        "media": {
          "description": "Procedure step media array",
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        "name": {
          "description": "Procedure step name",
          "type": "string"
        }
      },
      "required": [
        "name",
        "media"
      ],
      "type": "object"
    },
    "IMaintenanceProgramBlock": {
      "additionalProperties": false,
      "properties": {
        "blocks": {
          "items": {
            "$ref": "#/definitions/IProgramBlocks"
          },
          "type": "array"
        },
        "executed": {
          "type": "boolean"
        },
        "name": {
          "const": "maintenance",
          "type": "string"
        },
        "params": {
          "items": [
            {
              "$ref": "#/definitions/IStringParameterBlock"
            },
            {
              "$ref": "#/definitions/INumericParameterBlock"
            }
          ],
          "maxItems": 2,
          "minItems": 2,
          "type": "array"
        }
      },
      "required": [
        "name",
        "params"
      ],
      "type": "object"
    },
    "IManualMode": {
      "additionalProperties": false,
      "properties": {
        "analogScale": {
          "additionalProperties": false,
          "description": "Manual mode analog scale",
          "properties": {
            "max": {
              "type": "number"
            },
            "min": {
              "type": "number"
            }
          },
          "required": [
            "min",
            "max"
          ],
          "type": "object"
        },
        "controls": {
          "items": {
            "anyOf": [
              {
                "additionalProperties": false,
                "properties": {
                  "analogScaleDependant": {
                    "type": "boolean"
                  },
                  "name": {
                    "type": "string"
                  }
                },
                "required": [
                  "name",
                  "analogScaleDependant"
                ],
                "type": "object"
              },
              {
                "type": "string"
              }
            ]
          },
          "type": "array"
        },
        "incompatibility": {
          "description": "Incompatibilities between manual modes",
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        "name": {
          "description": "Name of the manual mode can contain 1 `#` for categorizing",
          "type": "string"
        },
        "requires": {
          "description": "Manual modes required to be enabled",
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        "watchdog": {
          "description": "Watchdog Security chain",
          "items": {
            "$ref": "#/definitions/IManualWatchdogCondition"
          },
          "type": "array"
        }
      },
      "required": [
        "name",
        "controls"
      ],
      "type": "object"
    },
    "IManualWatchdogCondition": {
      "additionalProperties": false,
      "properties": {
        "gateName": {
          "description": "Gate name to control",
          "type": "string"
        },
        "gateValue": {
          "description": "Gate value required for the security",
          "type": "number"
        }
      },
      "required": [
        "gateName",
        "gateValue"
      ],
      "type": "object"
    },
    "IModbusControllers": {
      "additionalProperties": false,
      "properties": {
        "ip": {
          "description": "IP Address on the local network",
          "type": "string"
        },
        "type": {
          "description": "Type of the IO Handler",
          "enum": [
            "em4",
            "wago"
          ],
          "type": "string"
        }
      },
      "required": [
        "ip",
        "type"
      ],
      "type": "object"
    },
    "IMultiplyParameterBlock": {
      "additionalProperties": false,
      "properties": {
        "name": {
          "const": "multiply",
          "description": "Parameter block name",
          "type": "string"
        },
        "params": {
          "description": "Parameter block sub parameters blocks",
          "items": {
            "$ref": "#/definitions/INumericParameterBlock"
          },
          "type": "array"
        },
        "value": {
          "description": "Value from this parameter block",
          "type": [
            "string",
            "number"
          ]
        }
      },
      "required": [
        "name",
        "params"
      ],
      "type": "object"
    },
    "INumericParameterBlock": {
      "anyOf": [
        {
          "$ref": "#/definitions/IProfileParameterBlock"
        },
        {
          "$ref": "#/definitions/IConstantParameterBlock"
        },
        {
          "$ref": "#/definitions/IIOReadParameterBlock"
        },
        {
          "$ref": "#/definitions/IAdditionParameterBlock"
        },
        {
          "$ref": "#/definitions/IMultiplyParameterBlock"
        },
        {
          "$ref": "#/definitions/IReverseParameterBlock"
        },
        {
          "$ref": "#/definitions/IConditionalParameterBlock"
        },
        {
          "$ref": "#/definitions/IVariableParameterBlock"
        },
        {
          "$ref": "#/definitions/ISlotLifetimeParameterBlock"
        },
        {
          "$ref": "#/definitions/IMaintenanceParameterBlock"
        }
      ],
      "description": "Parameter Blocks that return a number from data()"
    },
    "IOControllers": {
      "anyOf": [
        {
          "$ref": "#/definitions/IModbusControllers"
        },
        {
          "$ref": "#/definitions/IEX260Controller"
        }
      ]
    },
    "IOGateTypes": {
      "anyOf": [
        {
          "additionalProperties": false,
          "properties": {
            "address": {
              "description": "Address on the automaton address range",
              "type": "number"
            },
            "bus": {
              "description": "Gate bus",
              "enum": [
                "in",
                "out"
              ],
              "type": "string"
            },
            "controllerId": {
              "description": "Automaton where this gate is available",
              "type": "number"
            },
            "default": {
              "description": "Default value of this gate",
              "type": "number"
            },
            "isCritical": {
              "description": "Is this gate Critical",
              "type": "boolean"
            },
            "manualModeWatchdog": {
              "description": "Does this gate triggers manual mode watchdog security",
              "type": "boolean"
            },
            "name": {
              "description": "Gate name",
              "type": "string"
            },
            "size": {
              "description": "Gate controller data size",
              "enum": [
                "bit",
                "word"
              ],
              "type": "string"
            },
            "type": {
              "const": "default",
              "description": "Gate type",
              "type": "string"
            },
            "unity": {
              "description": "Unity used by this gate",
              "type": "string"
            }
          },
          "required": [
            "address",
            "bus",
            "controllerId",
            "default",
            "name",
            "size",
            "type"
          ],
          "type": "object"
        },
        {
          "additionalProperties": false,
          "properties": {
            "address": {
              "description": "Address on the automaton address range",
              "type": "number"
            },
            "bus": {
              "description": "Gate bus",
              "enum": [
                "in",
                "out"
              ],
              "type": "string"
            },
            "controllerId": {
              "description": "Automaton where this gate is available",
              "type": "number"
            },
            "default": {
              "description": "Default value of this gate",
              "type": "number"
            },
            "isCritical": {
              "description": "Is this gate Critical",
              "type": "boolean"
            },
            "levelMax": {
              "type": "number"
            },
            "manualModeWatchdog": {
              "description": "Does this gate triggers manual mode watchdog security",
              "type": "boolean"
            },
            "name": {
              "description": "Gate name",
              "type": "string"
            },
            "size": {
              "description": "Gate controller data size",
              "enum": [
                "bit",
                "word"
              ],
              "type": "string"
            },
            "type": {
              "const": "um18",
              "description": "Gate type",
              "type": "string"
            },
            "unity": {
              "description": "Unity used by this gate",
              "type": "string"
            }
          },
          "required": [
            "address",
            "bus",
            "controllerId",
            "default",
            "levelMax",
            "name",
            "size",
            "type"
          ],
          "type": "object"
        },
        {
          "additionalProperties": false,
          "properties": {
            "address": {
              "description": "Address on the automaton address range",
              "type": "number"
            },
            "bus": {
              "description": "Gate bus",
              "enum": [
                "in",
                "out"
              ],
              "type": "string"
            },
            "controllerId": {
              "description": "Automaton where this gate is available",
              "type": "number"
            },
            "default": {
              "description": "Default value of this gate",
              "type": "number"
            },
            "isCritical": {
              "description": "Is this gate Critical",
              "type": "boolean"
            },
            "manualModeWatchdog": {
              "description": "Does this gate triggers manual mode watchdog security",
              "type": "boolean"
            },
            "mapInMax": {
              "description": "Mapped input max data, from IOController",
              "type": "number"
            },
            "mapInMin": {
              "description": "Mapped input min data, from IO Controller",
              "type": "number"
            },
            "mapOutMax": {
              "description": "Mapped output max data, to Human",
              "type": "number"
            },
            "mapOutMin": {
              "description": "Mapped output min data, to Human",
              "type": "number"
            },
            "name": {
              "description": "Gate name",
              "type": "string"
            },
            "size": {
              "const": "word",
              "description": "Size is always a word for this typoe of Gate",
              "type": "string"
            },
            "type": {
              "const": "mapped",
              "description": "Gate type",
              "type": "string"
            },
            "unity": {
              "description": "Unity used by this gate",
              "type": "string"
            }
          },
          "required": [
            "address",
            "bus",
            "controllerId",
            "default",
            "mapOutMax",
            "mapOutMin",
            "name",
            "size",
            "type"
          ],
          "type": "object"
        },
        {
          "additionalProperties": false,
          "properties": {
            "address": {
              "description": "Address on the automaton address range",
              "type": "number"
            },
            "bus": {
              "description": "Gate bus",
              "enum": [
                "in",
                "out"
              ],
              "type": "string"
            },
            "controllerId": {
              "description": "Automaton where this gate is available",
              "type": "number"
            },
            "default": {
              "description": "Default value of this gate",
              "type": "number"
            },
            "isCritical": {
              "description": "Is this gate Critical",
              "type": "boolean"
            },
            "manualModeWatchdog": {
              "description": "Does this gate triggers manual mode watchdog security",
              "type": "boolean"
            },
            "name": {
              "description": "Gate name",
              "type": "string"
            },
            "size": {
              "const": "word",
              "description": "Gate controller data size",
              "type": "string"
            },
            "type": {
              "const": "pt100",
              "description": "Gate type",
              "type": "string"
            },
            "unity": {
              "const": "°C",
              "description": "Unity used by this gate",
              "type": "string"
            }
          },
          "required": [
            "address",
            "bus",
            "controllerId",
            "default",
            "name",
            "size",
            "type",
            "unity"
          ],
          "type": "object"
        }
      ]
    },
    "IPBRPremades": {
      "additionalProperties": false,
      "properties": {
        "cycle": {
          "type": "string"
        },
        "name": {
          "type": "string"
        },
        "profile": {
          "type": "string"
        }
      },
      "required": [
        "name",
        "profile",
        "cycle"
      ],
      "type": "object"
    },
    "IPBRSCCheckChain": {
      "additionalProperties": false,
      "properties": {
        "io": {
          "additionalProperties": false,
          "properties": {
            "gateName": {
              "type": "string"
            },
            "gateValue": {
              "type": "number"
            }
          },
          "required": [
            "gateName",
            "gateValue"
          ],
          "type": "object"
        },
        "name": {
          "enum": [
            "parameter",
            "io"
          ],
          "type": "string"
        },
        "parameter": {
          "$ref": "#/definitions/IParameterBlocks"
        }
      },
      "required": [
        "name"
      ],
      "type": "object"
    },
    "IPBRStartCondition": {
      "additionalProperties": false,
      "properties": {
        "checkChain": {
          "$ref": "#/definitions/IPBRSCCheckChain"
        },
        "conditionName": {
          "type": "string"
        },
        "startOnly": {
          "type": "boolean"
        }
      },
      "required": [
        "conditionName",
        "startOnly",
        "checkChain"
      ],
      "type": "object"
    },
    "IParameterBlocks": {
      "anyOf": [
        {
          "$ref": "#/definitions/INumericParameterBlock"
        },
        {
          "$ref": "#/definitions/IStringParameterBlock"
        }
      ],
      "description": "All the parameters blocks"
    },
    "IPassive": {
      "additionalProperties": false,
      "properties": {
        "actuators": {
          "additionalProperties": false,
          "description": "Actuators used to reach target",
          "properties": {
            "minus": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "items": {
                    "type": "string"
                  },
                  "type": "array"
                }
              ],
              "description": "Actuators used to reach target when we are over target"
            },
            "plus": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "items": {
                    "type": "string"
                  },
                  "type": "array"
                }
              ],
              "description": "Actuators used to reach target when we are under target"
            }
          },
          "required": [
            "plus"
          ],
          "type": "object"
        },
        "internal": {
          "const": true,
          "description": "If a passive mode is internal, it means that it is hidden from user.",
          "type": "boolean"
        },
        "manualModes": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "items": {
                "type": "string"
              },
              "type": "array"
            }
          ],
          "description": "Manual modes triggered by this passive regulation"
        },
        "name": {
          "description": "Passive name",
          "type": "string"
        },
        "sensors": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "items": {
                "type": "string"
              },
              "type": "array"
            }
          ],
          "description": "Sensors used to target"
        },
        "target": {
          "description": "Passive target number",
          "type": "number"
        }
      },
      "required": [
        "name",
        "target",
        "sensors",
        "actuators"
      ],
      "type": "object"
    },
    "IPassiveProgramBlock": {
      "additionalProperties": false,
      "properties": {
        "blocks": {
          "items": {
            "$ref": "#/definitions/IProgramBlocks"
          },
          "type": "array"
        },
        "executed": {
          "type": "boolean"
        },
        "name": {
          "const": "passive",
          "type": "string"
        },
        "params": {
          "items": [
            {
              "$ref": "#/definitions/IStringParameterBlock"
            },
            {
              "$ref": "#/definitions/INumericParameterBlock"
            },
            {
              "$ref": "#/definitions/INumericParameterBlock"
            }
          ],
          "maxItems": 3,
          "minItems": 3,
          "type": "array"
        }
      },
      "required": [
        "name",
        "params"
      ],
      "type": "object"
    },
    "IProfileParameterBlock": {
      "additionalProperties": false,
      "properties": {
        "name": {
          "const": "profile",
          "description": "Parameter block name",
          "type": "string"
        },
        "params": {
          "description": "Parameter block sub parameters blocks",
          "items": {
            "$ref": "#/definitions/IParameterBlocks"
          },
          "type": "array"
        },
        "value": {
          "description": "Value from this parameter block",
          "type": "string"
        }
      },
      "required": [
        "name",
        "value"
      ],
      "type": "object"
    },
    "IProfileSkeleton": {
      "additionalProperties": false,
      "properties": {
        "fieldGroups": {
          "description": "Fiels groups of this profile skeleton",
          "items": {
            "additionalProperties": false,
            "properties": {
              "fields": {
                "description": "Profile fields",
                "items": {
                  "$ref": "#/definitions/ProfileSkeletonFields"
                },
                "type": "array"
              },
              "name": {
                "description": "Name of the profile field group",
                "type": "string"
              }
            },
            "required": [
              "name",
              "fields"
            ],
            "type": "object"
          },
          "type": "array"
        },
        "identifier": {
          "description": "Profile identifier, used to map between profiles and cycles",
          "type": "string"
        }
      },
      "required": [
        "identifier",
        "fieldGroups"
      ],
      "type": "object"
    },
    "IProgram": {
      "additionalProperties": false,
      "properties": {
        "name": {
          "type": "string"
        },
        "profileRequired": {
          "type": "boolean"
        },
        "startConditions": {
          "items": {
            "$ref": "#/definitions/IPBRStartCondition"
          },
          "type": "array"
        },
        "steps": {
          "items": {
            "$ref": "#/definitions/IProgramStep"
          },
          "type": "array"
        }
      },
      "required": [
        "name",
        "profileRequired",
        "startConditions",
        "steps"
      ],
      "type": "object"
    },
    "IProgramBlocks": {
      "anyOf": [
        {
          "$ref": "#/definitions/IForLoopProgramBlock"
        },
        {
          "$ref": "#/definitions/IWhileLoopProgramBlock"
        },
        {
          "$ref": "#/definitions/IGroupProgramBlock"
        },
        {
          "$ref": "#/definitions/IStopProgramBlock"
        },
        {
          "$ref": "#/definitions/IStopTimerProgramBlock"
        },
        {
          "$ref": "#/definitions/IStartTimerProgramBlock"
        },
        {
          "$ref": "#/definitions/IIfProgramBlock"
        },
        {
          "$ref": "#/definitions/IVariableProgramBlock"
        },
        {
          "$ref": "#/definitions/IIOProgramBlock"
        },
        {
          "$ref": "#/definitions/IMaintenanceProgramBlock"
        },
        {
          "$ref": "#/definitions/ISlotLoadProgramBlock"
        },
        {
          "$ref": "#/definitions/ISlotUnloadProgramBlock"
        },
        {
          "$ref": "#/definitions/ISleepProgramBlock"
        },
        {
          "$ref": "#/definitions/IPassiveProgramBlock"
        }
      ]
    },
    "IProgramStep": {
      "additionalProperties": false,
      "properties": {
        "blocks": {
          "description": "Program blocks Array that is executed by this step",
          "items": {
            "$ref": "#/definitions/IProgramBlocks"
          },
          "type": "array"
        },
        "duration": {
          "$ref": "#/definitions/INumericParameterBlock",
          "description": "Parameter block that indicates the estimated Step duration time"
        },
        "endBlocks": {
          "description": "Program Blocks array that are executed at the end of a step",
          "items": {
            "$ref": "#/definitions/IProgramBlocks"
          },
          "type": "array"
        },
        "isEnabled": {
          "$ref": "#/definitions/INumericParameterBlock",
          "description": "Parameter block that indicates if this step is enabled in the PBR flow"
        },
        "name": {
          "description": "Program Step name",
          "type": "string"
        },
        "runAmount": {
          "$ref": "#/definitions/INumericParameterBlock",
          "description": "Optional Parameter block that tells the PBR if this steps must be runt multiple times"
        },
        "startBlocks": {
          "description": "Program Blocks array that are executed at the start of a step",
          "items": {
            "$ref": "#/definitions/IProgramBlocks"
          },
          "type": "array"
        }
      },
      "required": [
        "name",
        "isEnabled",
        "duration",
        "startBlocks",
        "endBlocks",
        "blocks"
      ],
      "type": "object"
    },
    "IReverseParameterBlock": {
      "additionalProperties": false,
      "properties": {
        "name": {
          "const": "reverse",
          "description": "Parameter block name",
          "type": "string"
        },
        "params": {
          "description": "Parameter block sub parameters blocks",
          "items": {
            "$ref": "#/definitions/INumericParameterBlock"
          },
          "maxItems": 1,
          "minItems": 1,
          "type": "array"
        },
        "value": {
          "description": "Value from this parameter block",
          "type": [
            "string",
            "number"
          ]
        }
      },
      "required": [
        "name",
        "params"
      ],
      "type": "object"
    },
    "ISleepProgramBlock": {
      "additionalProperties": false,
      "properties": {
        "blocks": {
          "items": {
            "$ref": "#/definitions/IProgramBlocks"
          },
          "type": "array"
        },
        "executed": {
          "type": "boolean"
        },
        "name": {
          "const": "sleep",
          "type": "string"
        },
        "params": {
          "items": {
            "$ref": "#/definitions/INumericParameterBlock"
          },
          "maxItems": 1,
          "minItems": 1,
          "type": "array"
        }
      },
      "required": [
        "name",
        "params"
      ],
      "type": "object"
    },
    "ISlotLifetimeParameterBlock": {
      "additionalProperties": false,
      "properties": {
        "name": {
          "const": "slotlife",
          "description": "Parameter block name",
          "type": "string"
        },
        "params": {
          "description": "Parameter block sub parameters blocks",
          "items": {
            "$ref": "#/definitions/IParameterBlocks"
          },
          "type": "array"
        },
        "value": {
          "description": "Value from this parameter block",
          "type": "string"
        }
      },
      "required": [
        "name",
        "value"
      ],
      "type": "object"
    },
    "ISlotLoadProgramBlock": {
      "additionalProperties": false,
      "properties": {
        "blocks": {
          "items": {
            "$ref": "#/definitions/IProgramBlocks"
          },
          "type": "array"
        },
        "executed": {
          "type": "boolean"
        },
        "name": {
          "const": "slotLoad",
          "type": "string"
        },
        "params": {
          "items": {
            "$ref": "#/definitions/IStringParameterBlock"
          },
          "maxItems": 1,
          "minItems": 1,
          "type": "array"
        }
      },
      "required": [
        "name",
        "params"
      ],
      "type": "object"
    },
    "ISlotProductOptions": {
      "additionalProperties": false,
      "description": "Slot product options",
      "properties": {
        "defaultProductSeries": {
          "$ref": "#/definitions/EProductSeries",
          "description": "Default product series"
        },
        "lifespan": {
          "description": "Lifespan of the product in days if -1, no lifespan, count the life since the product hass been installed",
          "type": "number"
        }
      },
      "required": [
        "lifespan",
        "defaultProductSeries"
      ],
      "type": "object"
    },
    "ISlotProductStatusParameterBlock": {
      "additionalProperties": false,
      "properties": {
        "name": {
          "const": "slotstatus",
          "description": "Parameter block name",
          "type": "string"
        },
        "params": {
          "description": "Parameter block sub parameters blocks",
          "items": {
            "$ref": "#/definitions/IParameterBlocks"
          },
          "type": "array"
        },
        "value": {
          "description": "Value from this parameter block",
          "type": "string"
        }
      },
      "required": [
        "name",
        "value"
      ],
      "type": "object"
    },
    "ISlotSensor": {
      "additionalProperties": false,
      "description": "Slot Sensor interface",
      "properties": {
        "io": {
          "description": "IO gate name of this sensor",
          "type": "string"
        },
        "type": {
          "$ref": "#/definitions/ESlotSensorType",
          "description": "Slot type"
        },
        "value": {
          "description": "Slot value",
          "type": "number"
        }
      },
      "required": [
        "io",
        "type"
      ],
      "type": "object"
    },
    "ISlotUnloadProgramBlock": {
      "additionalProperties": false,
      "properties": {
        "blocks": {
          "items": {
            "$ref": "#/definitions/IProgramBlocks"
          },
          "type": "array"
        },
        "executed": {
          "type": "boolean"
        },
        "name": {
          "const": "slotUnload",
          "type": "string"
        },
        "params": {
          "items": {
            "$ref": "#/definitions/IStringParameterBlock"
          },
          "maxItems": 1,
          "minItems": 1,
          "type": "array"
        }
      },
      "required": [
        "name",
        "params"
      ],
      "type": "object"
    },
    "IStartTimerProgramBlock": {
      "additionalProperties": false,
      "properties": {
        "blocks": {
          "items": {
            "$ref": "#/definitions/IProgramBlocks"
          },
          "type": "array"
        },
        "executed": {
          "type": "boolean"
        },
        "name": {
          "const": "startTimer",
          "type": "string"
        },
        "params": {
          "items": [
            {
              "$ref": "#/definitions/IStringParameterBlock"
            },
            {
              "$ref": "#/definitions/INumericParameterBlock"
            }
          ],
          "maxItems": 2,
          "minItems": 2,
          "type": "array"
        }
      },
      "required": [
        "blocks",
        "name",
        "params"
      ],
      "type": "object"
    },
    "IStopProgramBlock": {
      "additionalProperties": false,
      "properties": {
        "blocks": {
          "items": {
            "$ref": "#/definitions/IProgramBlocks"
          },
          "type": "array"
        },
        "executed": {
          "type": "boolean"
        },
        "name": {
          "const": "stop",
          "type": "string"
        },
        "params": {
          "items": {
            "$ref": "#/definitions/IStringParameterBlock"
          },
          "maxItems": 1,
          "minItems": 1,
          "type": "array"
        }
      },
      "required": [
        "name",
        "params"
      ],
      "type": "object"
    },
    "IStopTimerProgramBlock": {
      "additionalProperties": false,
      "properties": {
        "blocks": {
          "items": {
            "$ref": "#/definitions/IProgramBlocks"
          },
          "type": "array"
        },
        "executed": {
          "type": "boolean"
        },
        "name": {
          "const": "stopTimer",
          "type": "string"
        },
        "params": {
          "items": {
            "$ref": "#/definitions/IStringParameterBlock"
          },
          "maxItems": 1,
          "minItems": 1,
          "type": "array"
        }
      },
      "required": [
        "name",
        "params"
      ],
      "type": "object"
    },
    "IStringParameterBlock": {
      "anyOf": [
        {
          "$ref": "#/definitions/ISlotProductStatusParameterBlock"
        },
        {
          "$ref": "#/definitions/IConstantStringParameterBlock"
        }
      ],
      "description": "Parameters Blocks that return a string value from data()"
    },
    "IVariableParameterBlock": {
      "additionalProperties": false,
      "properties": {
        "name": {
          "const": "variable",
          "description": "Parameter block name",
          "type": "string"
        },
        "params": {
          "description": "Parameter block sub parameters blocks",
          "items": {
            "$ref": "#/definitions/IParameterBlocks"
          },
          "type": "array"
        },
        "value": {
          "description": "Value from this parameter block",
          "type": "string"
        }
      },
      "required": [
        "name",
        "value"
      ],
      "type": "object"
    },
    "IVariableProgramBlock": {
      "additionalProperties": false,
      "properties": {
        "blocks": {
          "items": {
            "$ref": "#/definitions/IProgramBlocks"
          },
          "type": "array"
        },
        "executed": {
          "type": "boolean"
        },
        "name": {
          "const": "variable",
          "type": "string"
        },
        "params": {
          "items": [
            {
              "$ref": "#/definitions/IStringParameterBlock"
            },
            {
              "$ref": "#/definitions/INumericParameterBlock"
            }
          ],
          "maxItems": 2,
          "minItems": 2,
          "type": "array"
        }
      },
      "required": [
        "name",
        "params"
      ],
      "type": "object"
    },
    "IWhileLoopProgramBlock": {
      "additionalProperties": false,
      "properties": {
        "blocks": {
          "items": {
            "$ref": "#/definitions/IProgramBlocks"
          },
          "type": "array"
        },
        "executed": {
          "type": "boolean"
        },
        "name": {
          "const": "while",
          "type": "string"
        },
        "params": {
          "items": [
            {
              "$ref": "#/definitions/INumericParameterBlock"
            },
            {
              "$ref": "#/definitions/IStringParameterBlock"
            },
            {
              "$ref": "#/definitions/INumericParameterBlock"
            }
          ],
          "maxItems": 3,
          "minItems": 3,
          "type": "array"
        }
      },
      "required": [
        "blocks",
        "name",
        "params"
      ],
      "type": "object"
    },
    "ProfileSkeletonFields": {
      "anyOf": [
        {
          "additionalProperties": false,
          "properties": {
            "floatMax": {
              "type": "number"
            },
            "floatMin": {
              "type": "number"
            },
            "floatStep": {
              "type": "number"
            },
            "name": {
              "description": "Name of the profile field",
              "type": "string"
            },
            "type": {
              "const": "float",
              "description": "Type of the profile field",
              "type": "string"
            },
            "unity": {
              "description": "Unity of the profile field, it used for UI purposes only",
              "type": "string"
            },
            "value": {
              "description": "Value contained byt the profile field",
              "type": "number"
            }
          },
          "required": [
            "floatMax",
            "floatMin",
            "floatStep",
            "name",
            "type",
            "value"
          ],
          "type": "object"
        },
        {
          "additionalProperties": false,
          "properties": {
            "name": {
              "description": "Name of the profile field",
              "type": "string"
            },
            "type": {
              "const": "bool",
              "description": "Type of the profile field",
              "type": "string"
            },
            "unity": {
              "description": "Unity of the profile field, it used for UI purposes only",
              "type": "string"
            },
            "value": {
              "description": "Value contained byt the profile field",
              "type": "boolean"
            }
          },
          "required": [
            "name",
            "type",
            "value"
          ],
          "type": "object"
        },
        {
          "additionalProperties": false,
          "properties": {
            "name": {
              "description": "Name of the profile field",
              "type": "string"
            },
            "type": {
              "const": "int",
              "description": "Type of the profile field",
              "type": "string"
            },
            "unity": {
              "description": "Unity of the profile field, it used for UI purposes only",
              "type": "string"
            },
            "value": {
              "description": "Value contained byt the profile field",
              "type": "number"
            }
          },
          "required": [
            "name",
            "type",
            "value"
          ],
          "type": "object"
        },
        {
          "additionalProperties": false,
          "properties": {
            "name": {
              "description": "Name of the profile field",
              "type": "string"
            },
            "type": {
              "const": "time",
              "description": "Type of the profile field",
              "type": "string"
            },
            "units": {
              "items": {
                "enum": [
                  "hours",
                  "minutes",
                  "seconds",
                  "milliseconds"
                ],
                "type": "string"
              },
              "type": "array"
            },
            "unity": {
              "description": "Unity of the profile field, it used for UI purposes only",
              "type": "string"
            },
            "value": {
              "description": "Value contained byt the profile field",
              "type": "number"
            }
          },
          "required": [
            "name",
            "type",
            "units",
            "value"
          ],
          "type": "object"
        }
      ],
      "description": "Base profile types"
    }
  }
}